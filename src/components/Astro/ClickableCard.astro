---
/*
 * Component for rendering a styled, clickable card with optional icon and customizable appearance.
 *
 * Props:
 * - title: string - Card header text
 * - description: string - Main content text
 * - href: string - The URL the card should link to
 * - alt?: boolean - Use alternate color scheme
 * - iconName?: string - Icon name (e.g. "ri:star")
 * - alignIcon?: "left" | "right" | null - Icon position
 * - shadowSize?: "sm" | "md" | "lg" | "none" | null - Shadow depth
 * - class?: string - Additional CSS classes
 */

import { Icon } from "astro-icon/components";

interface Props {
  title: string;
  description: string;
  href: string;
  alt?: boolean;
  iconName?: string;
  alignIcon?: "left" | "right" | null;
  shadowSize?: "sm" | "md" | "lg" | "none" | null;
  class?: string | undefined;
}

const {
  title,
  description,
  href,
  alt = false,
  iconName = null,
  alignIcon = "left",
  shadowSize = "sm",
  class: className,
} = Astro.props;

const options = {
  "rounded-theme": true,
  "bg-theme-primary border-theme-primary": !alt,
  "bg-theme-secondary border-theme-secondary": alt,
  "shadow-sm": shadowSize === "sm",
  "shadow-md": shadowSize === "md",
  "shadow-lg": shadowSize === "lg",
  "shadow-none": shadowSize === "none",
};
---

<a href={href} class="card-link group no-underline">
  <div
    class:list={[
      "border-2 shadow-theme-primary p-4 w-full h-auto md:max-w-[450px] transition-all duration-300 ease-in-out",
      "group-hover:bg-theme-secondary group-hover:border-theme-secondary group-hover:shadow-theme-secondary",
      options,
      className,
    ]}
  >
    <p
      class:list={[
        "h3",
        "uppercase",
        "font-bold",
        "mb-2",
        { "text-theme-primary": !alt, "text-theme-secondary": alt },
        "group-hover:text-theme-secondary",
      ]}
    >
      <span class="flex items-center gap-4">
        {
          iconName && alignIcon === 'left' && (
            <Fragment>
              <Icon name={iconName} width={42} height={42} />
              <span class="md:flex-1 sm:border-b sm:border-theme-primary group-hover:border-theme-secondary" />
            </Fragment>
          )
        }
        {title}
        {
          iconName && alignIcon === 'right' && (
            <Fragment>
              <span class="md:flex-1 sm:border-b sm:border-theme-primary group-hover:border-theme-secondary" />
              <Icon name={iconName} width={42} height={42} />
            </Fragment>
          )
        }
      </span>
    </p>
    <hr
      class:list={[
        "border-1 mb-2",
        { "border-theme-primary": !alt },
        { "border-theme-secondary": alt },
        "group-hover:border-theme-secondary",
      ]}
    />
    <p class:list={["text-lg", { "text-theme-primary": !alt, "text-theme-secondary": alt }, "group-hover:text-theme-secondary"]}>
      {description}
    </p>
  </div>
</a>

<style>
  .card-link:active div {
    transform: translateY(4px);
  }
</style>
